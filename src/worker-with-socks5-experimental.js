const a0_0x51b918=a0_0xfa1b;(function(_0xedf293,_0x33a75c){const _0x68bd73=a0_0xfa1b,_0x2f058f=_0xedf293();while(!![]){try{const _0x429029=parseInt(_0x68bd73(0x122))/0x1*(-parseInt(_0x68bd73(0x114))/0x2)+-parseInt(_0x68bd73(0x136))/0x3+-parseInt(_0x68bd73(0xef))/0x4*(-parseInt(_0x68bd73(0xd5))/0x5)+parseInt(_0x68bd73(0xdc))/0x6*(-parseInt(_0x68bd73(0x101))/0x7)+parseInt(_0x68bd73(0xc4))/0x8*(parseInt(_0x68bd73(0xd0))/0x9)+parseInt(_0x68bd73(0xf7))/0xa+parseInt(_0x68bd73(0xcc))/0xb*(parseInt(_0x68bd73(0x11f))/0xc);if(_0x429029===_0x33a75c)break;else _0x2f058f['push'](_0x2f058f['shift']());}catch(_0x154929){_0x2f058f['push'](_0x2f058f['shift']());}}}(a0_0x561a,0xd531b));import{connect}from'cloudflare:sockets';function a0_0xfa1b(_0x238619,_0x193ac4){const _0x561a51=a0_0x561a();return a0_0xfa1b=function(_0xfa1b89,_0x4a561e){_0xfa1b89=_0xfa1b89-0xc2;let _0x2a9e08=_0x561a51[_0xfa1b89];if(a0_0xfa1b['LGTPya']===undefined){var _0x30746e=function(_0x3e5ba6){const _0x3d75d6='abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=';let _0x1a6451='',_0x10484f='';for(let _0x5579b9=0x0,_0x1d1c4a,_0x4506e0,_0x492253=0x0;_0x4506e0=_0x3e5ba6['charAt'](_0x492253++);~_0x4506e0&&(_0x1d1c4a=_0x5579b9%0x4?_0x1d1c4a*0x40+_0x4506e0:_0x4506e0,_0x5579b9++%0x4)?_0x1a6451+=String['fromCharCode'](0xff&_0x1d1c4a>>(-0x2*_0x5579b9&0x6)):0x0){_0x4506e0=_0x3d75d6['indexOf'](_0x4506e0);}for(let _0x51fc3e=0x0,_0xfe51bf=_0x1a6451['length'];_0x51fc3e<_0xfe51bf;_0x51fc3e++){_0x10484f+='%'+('00'+_0x1a6451['charCodeAt'](_0x51fc3e)['toString'](0x10))['slice'](-0x2);}return decodeURIComponent(_0x10484f);};a0_0xfa1b['JABFyH']=_0x30746e,_0x238619=arguments,a0_0xfa1b['LGTPya']=!![];}const _0x4d1b3b=_0x561a51[0x0],_0x5699be=_0xfa1b89+_0x4d1b3b,_0x30f62c=_0x238619[_0x5699be];return!_0x30f62c?(_0x2a9e08=a0_0xfa1b['JABFyH'](_0x2a9e08),_0x238619[_0x5699be]=_0x2a9e08):_0x2a9e08=_0x30f62c,_0x2a9e08;},a0_0xfa1b(_0x238619,_0x193ac4);}let userID=a0_0x51b918(0xfe),proxyIP='',socks5Address='';if(!isValidUUID(userID))throw new Error(a0_0x51b918(0x102));let parsedSocks5Address={},enableSocks=![];export default{async 'fetch'(_0x3e5ba6,_0x3d75d6,_0x1a6451){const _0x46c431=a0_0x51b918;try{userID=_0x3d75d6[_0x46c431(0xed)]||userID,proxyIP=_0x3d75d6[_0x46c431(0x12f)]||proxyIP,socks5Address=_0x3d75d6[_0x46c431(0xd3)]||socks5Address;if(socks5Address)try{parsedSocks5Address=socks5AddressParser(socks5Address),enableSocks=!![];}catch(_0x5579b9){let _0x1d1c4a=_0x5579b9;console[_0x46c431(0x107)](_0x1d1c4a[_0x46c431(0xcb)]()),enableSocks=![];}const _0x10484f=_0x3e5ba6[_0x46c431(0xff)][_0x46c431(0x10e)](_0x46c431(0xd2));if(!_0x10484f||_0x10484f!==_0x46c431(0xeb)){const _0x4506e0=new URL(_0x3e5ba6[_0x46c431(0xd9)]);switch(_0x4506e0[_0x46c431(0xf8)]){case'/':return new Response(JSON[_0x46c431(0x13c)](_0x3e5ba6['cf']),{'status':0xc8});case'/'+userID:{const _0x492253=getVLESSConfig(userID,_0x3e5ba6[_0x46c431(0xff)][_0x46c431(0x10e)](_0x46c431(0xea)));return new Response(''+_0x492253,{'status':0xc8,'headers':{'Content-Type':_0x46c431(0xe6)}});}default:return new Response(_0x46c431(0xd6),{'status':0x194});}}else return await vlessOverWSHandler(_0x3e5ba6);}catch(_0x51fc3e){let _0xfe51bf=_0x51fc3e;return new Response(_0xfe51bf[_0x46c431(0xcb)]());}}};async function vlessOverWSHandler(_0x2660c9){const _0x4de4e2=a0_0x51b918,_0xf954e9=new WebSocketPair(),[_0x134cd5,_0x481012]=Object[_0x4de4e2(0x130)](_0xf954e9);_0x481012[_0x4de4e2(0x106)]();let _0x2b8d45='',_0xc1c66c='';const _0x4a8f74=(_0x40f3b5,_0x56228e)=>{const _0x24fe89=_0x4de4e2;console[_0x24fe89(0x107)]('['+_0x2b8d45+':'+_0xc1c66c+']\x20'+_0x40f3b5,_0x56228e||'');},_0x27f035=_0x2660c9[_0x4de4e2(0xff)][_0x4de4e2(0x10e)](_0x4de4e2(0x117))||'',_0x12e5b8=makeReadableWebSocketStream(_0x481012,_0x27f035,_0x4a8f74);let _0x2ce9a2={'value':null},_0x34d0bd=![];return _0x12e5b8[_0x4de4e2(0x108)](new WritableStream({async 'write'(_0x54e42f,_0x56215b){const _0x5bb077=_0x4de4e2;if(_0x34d0bd)return await handleDNSQuery(_0x54e42f,_0x481012,null,_0x4a8f74);if(_0x2ce9a2[_0x5bb077(0x119)]){const _0x5a5512=_0x2ce9a2[_0x5bb077(0x119)][_0x5bb077(0xde)][_0x5bb077(0x12e)]();await _0x5a5512[_0x5bb077(0xc7)](_0x54e42f),_0x5a5512[_0x5bb077(0x12d)]();return;}const {hasError:_0x40f127,message:_0x427f77,addressType:_0x34c493,portRemote:portRemote=0x1bb,addressRemote:addressRemote='',rawDataIndex:_0x81f07f,vlessVersion:vlessVersion=new Uint8Array([0x0,0x0]),isUDP:_0x370125}=processVlessHeader(_0x54e42f,userID);_0x2b8d45=addressRemote,_0xc1c66c=portRemote+'--'+Math[_0x5bb077(0x13d)]()+'\x20'+(_0x370125?_0x5bb077(0x11c):_0x5bb077(0xc2))+'\x20';if(_0x40f127){throw new Error(_0x427f77);return;}if(_0x370125){if(portRemote===0x35)_0x34d0bd=!![];else{throw new Error(_0x5bb077(0x10f));return;}}const _0x47730c=new Uint8Array([vlessVersion[0x0],0x0]),_0x4100af=_0x54e42f[_0x5bb077(0x13a)](_0x81f07f);if(_0x34d0bd)return handleDNSQuery(_0x4100af,_0x481012,_0x47730c,_0x4a8f74);handleTCPOutBound(_0x2ce9a2,_0x34c493,addressRemote,portRemote,_0x4100af,_0x481012,_0x47730c,_0x4a8f74);},'close'(){const _0x3f92f0=_0x4de4e2;_0x4a8f74(_0x3f92f0(0x138));},'abort'(_0x10cbd4){const _0x5c6463=_0x4de4e2;_0x4a8f74(_0x5c6463(0xdf),JSON[_0x5c6463(0x13c)](_0x10cbd4));}}))[_0x4de4e2(0x113)](_0x580811=>{const _0x1c3706=_0x4de4e2;_0x4a8f74(_0x1c3706(0xe2),_0x580811);}),new Response(null,{'status':0x65,'webSocket':_0x134cd5});}function a0_0x561a(){const _0x570291=['BwvZC2fNzq','sw52ywXPzcbtt0nluYbHzgrYzxnZigzVCM1HDa','Cg9W','ksb0y3aGAxmGywjVCNq','zdm0mMqXmwuTzdqYnc00ntGZlwiZnMuTnti0ywiXzJbHzMe0','AgvHzgvYCW','zw5XDwv1zq','nJnkBgnYELC','DxvPzcbPCYbUB3qGDMfSAwq','C29JA3mGy29UBMvJDgLVBIbVCgvUzwq','C2vUDcbZB2nRCYbYzxf1zxn0','zxjYB3i','ywnJzxb0','Bg9N','CgLWzvrV','CMvTB3rLq29UBMvJDgLVBIeUCMvHzgfIBguGywjVCNq','yxjYyxLcDwzMzxi','jNbHDgG9jtjgjtngzwqLm0qYmdq4iW','D2vIu29JA2v0u2vYDMvYigHHCYbLCNjVCG','C2vUDcbZB2nRCYbNCMvLDgLUzW','z2v0','vurqihbYB3H5ig9UBhKGzw5HyMXLigzVCIbetLmGD2HPy2GGAxmGCg9YDca1mW','y2HHCKnVzgvbDa','CgXLyxnLihbYB3zPzguGDxnLCM5HBwuVCgfZC3DVCMq','CMvTB3rLu29JA2v0vg9xuYbOyxmGzxHJzxb0Aw9Uia','y2f0y2G','mMHRt2LNzG','z2v0uMvHzgvY','y2XVC2vK','C2vJlxDLyNnVy2TLDc1WCM90B2nVBa','ksb0y3aGAxmGy2XVC2u','DMfSDwu','oI8V','cI0Tls0Tls0Tls0Tls0Tls0Tls0Tls0Tls0Tls0Tls0Tls0Tls0Tls0Tls0Tls0Tls0Tls0Tls0Tls0Tls0TlqOJiYmJiYmJiYmJiYmJiYmJiYmJiYmJiYmJiYmJiYmJiYmJiYmJiYmJiYmJiYmJiYmJiYmJiYmJiYmJiYmJiYmJcMnSyxnOlw1LDgekls0Tls0Tls0Tls0Tls0Tls0Tls0Tls0Tls0Tls0Tls0Tls0Tls0Tls0Tls0Tls0Tls0Tls0Tls0Tls0Tls0TcI0GDhLWztOGDMXLC3mkicbUyw1LoIa','DwrWia','cImJiYmJiYmJiYmJiYmJiYmJiYmJiYmJiYmJiYmJiYmJiYmJiYmJiYmJiYmJiYmJiYmJiYmJiYmJiYmJiYmJiYmkDJjYyxKkls0Tls0Tls0Tls0Tls0Tls0Tls0Tls0Tls0Tls0Tls0Tls0Tls0Tls0Tls0Tls0Tls0Tls0Tls0Tls0Tls0TcG','AgfUzgXLre5tuxvLCNKGAgf2zsbLEgnLChrPB24SigvYCM9YoIa','mtu1mZKWmJHmu2XAyw8','Dg9mB3DLCKnHC2u','AM9PBG','mtiWndC0ng1KtenbsG','ywrKrxzLBNrmAxn0zw5LCG','Aw52ywXPzcbKyxrH','CMvHzhLtDgf0zq','CMv2zxjZzq','u3rYAw5NAwzPzwqGvvvjrcbPCYbPBNzHBgLK','CMv0CNKGDgnWu29JA2v0ignSB3nLzcbLCNjVCG','z2v0vwLUDde2','zMfPBcb0BYbHDxrOihnVy2TZihnLCNzLCG','C2fMzunSB3nLv2vIu29JA2v0igvYCM9Y','cIaGCg9YDdOGndqZcIaGDxvPzdOG','CMvSzwfZzuXVy2S','z2v0v3jPDgvY','ufjpwfLjua','DMfSDwvZ','jMzWpxjHBMrVBwL6zwqMDhLWzt13CYzOB3n0pq','CMvWBgfJzq','zMLUywXSEq','zgvJB2rL','zgf0yq','mZC5odqZmLztr0LPAq','igv4CgvJDgvKoIa1','CMvHzgfIBgvxzwjtB2nRzxrtDhjLyw0GAxmGy2XVC2u','BgvUz3rO','C2XPy2u','Aw52ywXPzcb1C2vY','C3rYAw5NAwz5','CMfUzg9T','DgvZDa','CMv0CNK','C3rHy2S','DgnWia','Aw5JBhvKzxm','mJaXntG4oe1yz3P0qq','BwfW','BM8GywnJzxb0ywjSzsbTzxrOB2rZ','D3jPDgu','D2vIu29JA2v0lNjLywr5u3rHDguGAxmGBM90ig9Wzw4Sig1HEwjLignSB3nL','igLZig5VDcbZDxbWB3j0lcbJB21Tyw5KidaXlxrJCcWWmI11zhaSmdmTBxv4','C2vUza','Dg9tDhjPBMC','mtfyu3zotuC','C3bSAxq','cIaGC2vYDMvYoIa','oc44lJqUna','mtHtALrxqNa','C29JA3mGC2vYDMvYig5LzwrZigf1DgG','vxbNCMfKzq','u09ds1m1','DMXLC3m','nJu1seDzq05Q','tM90igzVDw5K','cIaGBMv0D29YAZOGD3mkicb0Bhm6ihrYDwukicb1zha6igzHBhnLcIaGC25PoIa','ywrKCMvZC1zHBhvLigLZigvTChr5lcbHzgrYzxnZvhLWzsbPCYa','DxjS','zw5JB2rL','p2vUy3j5ChrPB249BM9UzszZzwn1CML0Et10BhmMC25Ppq','nZKXntiWqwztAvPX','CMvTB3rLq29UBMvJDgLVBIeUCMvHzgfIBguGAxmGy2XVC2uGD2L0AcbOyxnjBMnVBwLUz0rHDgeGAxmG','D3jPDgfIBgu','CMvHzgfIBgvxzwjtB2nRzxrtDhjLyw0GAxmGywjVCNq','zMXHDe1HCa','Aw52AwXKicbHzgrYzxnZvhLWzsbPCYa','CMvHzgfIBgvxzwjtB2nRzxrtDhjLyw0GCgLWzvrVigvYCM9Y','ChvZAa','cIaGy2XPzw50lwzPBMDLCNbYAw50oIbJAhjVBwukicb3CY1VChrZoGOGicaGCgf0AdOGiI8/zwq9mJa0ocikicaGigHLywrLCNm6cIaGicaGigHVC3q6ia','y29TBwfUzca','Dgv4Dc9WBgfPBJTJAgfYC2v0pxv0zI04','yNL0zuXLBMD0Aa','uMvHzgfIBgvtDhjLyw0GD2fZignHBMnLBgvKlcbKDwuGDg8G','zMfPBcb0BYbVCgvUihnVy2TZignVBM5Ly3rPB24','sg9ZDa','D2vIC29JA2v0','zNjVBq','vvvjra','yNvMzMvY','mZe2mdHOBeToBeS','zg5ZihnLCNzLCIG','y29UBMvJDgvKihrVia','oJq0mW','y2XVC2u','CMvHzgfIBgu','CMvHza','cI0Tls0Tls0Tls0Tls0Tls0Tls0Tls0Tls0Tls0Tls0Tls0Tls0Tls0Tls0Tls0Tls0Tls0Tls0Tls0Tls0TlqOJiYmJiYmJiYmJiYmJiYmJiYmJiYmJiYmJiYmJiYmJiYmJiYmJiYmJiYmJiYmJiYmJiYmJiYmJiYmJiYmJiYmJcG','mty5nZm1odbQtMnsAw0','Cgf0Ag5HBwu','C29JA3mGC2vYDMvYihzLCNnPB24GzxjYB3i6ia'];a0_0x561a=function(){return _0x570291;};return a0_0x561a();}async function handleTCPOutBound(_0x95baea,_0x1753ce,_0x24783b,_0x2af7cc,_0x1013d0,_0x1c3710,_0x3bcc7f,_0xdad8b7){async function _0x464c7d(_0x54ef22,_0x14dd38,_0x2ce128=![]){const _0x2118db=a0_0xfa1b,_0x16c374=_0x2ce128?await socks5Connect(_0x1753ce,_0x54ef22,_0x14dd38,_0xdad8b7):connect({'hostname':_0x54ef22,'port':_0x14dd38});_0x95baea[_0x2118db(0x119)]=_0x16c374,_0xdad8b7(_0x2118db(0xf1)+_0x54ef22+':'+_0x14dd38);const _0x69f0cf=_0x16c374[_0x2118db(0xde)][_0x2118db(0x12e)]();return await _0x69f0cf[_0x2118db(0xc7)](_0x1013d0),_0x69f0cf[_0x2118db(0x12d)](),_0x16c374;}async function _0x1d20f2(){const _0x531654=a0_0xfa1b;enableSocks?_0x21e637=await _0x464c7d(_0x24783b,_0x2af7cc,!![]):_0x21e637=await _0x464c7d(proxyIP||_0x24783b,_0x2af7cc),_0x21e637[_0x531654(0x116)][_0x531654(0x113)](_0x2c86cd=>{const _0x57922c=_0x531654;console[_0x57922c(0x107)](_0x57922c(0x128),_0x2c86cd);})[_0x531654(0x133)](()=>{safeCloseWebSocket(_0x1c3710);}),remoteSocketToWS(_0x21e637,_0x1c3710,_0x3bcc7f,null,_0xdad8b7);}let _0x21e637=await _0x464c7d(_0x24783b,_0x2af7cc);remoteSocketToWS(_0x21e637,_0x1c3710,_0x3bcc7f,_0x1d20f2,_0xdad8b7);}function makeReadableWebSocketStream(_0x533677,_0x44859a,_0x22e98a){let _0x54accc=![];const _0x4b2f45=new ReadableStream({'start'(_0xfc9bc6){const _0x3115da=a0_0xfa1b;_0x533677[_0x3115da(0x123)](_0x3115da(0xfa),_0x44920b=>{const _0x30b568=_0x3115da;if(_0x54accc)return;const _0x4d8e40=_0x44920b[_0x30b568(0x135)];_0xfc9bc6[_0x30b568(0x100)](_0x4d8e40);}),_0x533677[_0x3115da(0x123)](_0x3115da(0xf3),()=>{const _0xb79ff0=_0x3115da;safeCloseWebSocket(_0x533677);if(_0x54accc)return;_0xfc9bc6[_0xb79ff0(0xf3)]();}),_0x533677[_0x3115da(0x123)](_0x3115da(0x105),_0x5cbed4=>{const _0x18fa42=_0x3115da;_0x22e98a(_0x18fa42(0x10c)),_0xfc9bc6[_0x18fa42(0x105)](_0x5cbed4);});const {earlyData:_0x16923c,error:_0x1ba8fb}=base64ToArrayBuffer(_0x44859a);if(_0x1ba8fb)_0xfc9bc6[_0x3115da(0x105)](_0x1ba8fb);else _0x16923c&&_0xfc9bc6[_0x3115da(0x100)](_0x16923c);},'pull'(_0x354870){},'cancel'(_0x88d26b){const _0xcecf1d=a0_0xfa1b;if(_0x54accc)return;_0x22e98a(_0xcecf1d(0xe8)+_0x88d26b),_0x54accc=!![],safeCloseWebSocket(_0x533677);}});return _0x4b2f45;}function processVlessHeader(_0x4e5c33,_0x1c6d02){const _0x3738c7=a0_0x51b918;if(_0x4e5c33[_0x3738c7(0xe7)]<0x18)return{'hasError':!![],'message':_0x3738c7(0x124)};const _0x264422=new Uint8Array(_0x4e5c33[_0x3738c7(0x13a)](0x0,0x1));let _0x2cbcbd=![],_0x17960e=![];stringify(new Uint8Array(_0x4e5c33[_0x3738c7(0x13a)](0x1,0x11)))===_0x1c6d02&&(_0x2cbcbd=!![]);if(!_0x2cbcbd)return{'hasError':!![],'message':_0x3738c7(0x13b)};const _0x290e13=new Uint8Array(_0x4e5c33[_0x3738c7(0x13a)](0x11,0x12))[0x0],_0x29e073=new Uint8Array(_0x4e5c33[_0x3738c7(0x13a)](0x12+_0x290e13,0x12+_0x290e13+0x1))[0x0];if(_0x29e073===0x1){}else{if(_0x29e073===0x2)_0x17960e=!![];else return{'hasError':!![],'message':_0x3738c7(0xe5)+_0x29e073+_0x3738c7(0xc9)};}const _0x3edec8=0x12+_0x290e13+0x1,_0x7ee9fd=_0x4e5c33[_0x3738c7(0x13a)](_0x3edec8,_0x3edec8+0x2),_0x5b6fa4=new DataView(_0x7ee9fd)[_0x3738c7(0x129)](0x0);let _0x160a0b=_0x3edec8+0x2;const _0xc21a35=new Uint8Array(_0x4e5c33[_0x3738c7(0x13a)](_0x160a0b,_0x160a0b+0x1)),_0x423082=_0xc21a35[0x0];let _0x4695bb=0x0,_0x310f6c=_0x160a0b+0x1,_0x2923c4='';switch(_0x423082){case 0x1:_0x4695bb=0x4,_0x2923c4=new Uint8Array(_0x4e5c33[_0x3738c7(0x13a)](_0x310f6c,_0x310f6c+_0x4695bb))[_0x3738c7(0x121)]('.');break;case 0x2:_0x4695bb=new Uint8Array(_0x4e5c33[_0x3738c7(0x13a)](_0x310f6c,_0x310f6c+0x1))[0x0],_0x310f6c+=0x1,_0x2923c4=new TextDecoder()[_0x3738c7(0x134)](_0x4e5c33[_0x3738c7(0x13a)](_0x310f6c,_0x310f6c+_0x4695bb));break;case 0x3:_0x4695bb=0x10;const _0x153575=new DataView(_0x4e5c33[_0x3738c7(0x13a)](_0x310f6c,_0x310f6c+_0x4695bb)),_0x27583c=[];for(let _0x430071=0x0;_0x430071<0x8;_0x430071++){_0x27583c[_0x3738c7(0xe3)](_0x153575[_0x3738c7(0x129)](_0x430071*0x2)[_0x3738c7(0xcb)](0x10));}_0x2923c4=_0x27583c[_0x3738c7(0x121)](':');break;default:return{'hasError':!![],'message':_0x3738c7(0xe1)+_0x423082};}if(!_0x2923c4)return{'hasError':!![],'message':_0x3738c7(0xd8)+_0x423082};return{'hasError':![],'addressRemote':_0x2923c4,'addressType':_0x423082,'portRemote':_0x5b6fa4,'rawDataIndex':_0x310f6c+_0x4695bb,'vlessVersion':_0x264422,'isUDP':_0x17960e};}async function remoteSocketToWS(_0x3609e5,_0x570ab4,_0x565233,_0xbef5fd,_0x3db1d0){const _0x39ffc1=a0_0x51b918;let _0x1727ae=0x0,_0x215da7=[],_0x3cad8f=_0x565233,_0x3b388a=![];await _0x3609e5[_0x39ffc1(0xf4)][_0x39ffc1(0x108)](new WritableStream({'start'(){},async 'write'(_0x4608eb,_0x380ec8){const _0x2539da=_0x39ffc1;_0x3b388a=!![],_0x570ab4[_0x2539da(0x125)]!==WS_READY_STATE_OPEN&&_0x380ec8[_0x2539da(0x105)](_0x2539da(0xc8)),_0x3cad8f?(_0x570ab4[_0x2539da(0xca)](await new Blob([_0x3cad8f,_0x4608eb])[_0x2539da(0x10a)]()),_0x3cad8f=null):_0x570ab4[_0x2539da(0xca)](_0x4608eb);},'close'(){const _0x16abae=_0x39ffc1;_0x3db1d0(_0x16abae(0xdd)+_0x3b388a);},'abort'(_0x42be26){const _0x5d052d=_0x39ffc1;console[_0x5d052d(0x105)](_0x5d052d(0x109),_0x42be26);}}))[_0x39ffc1(0x113)](_0x3e3668=>{const _0x132483=_0x39ffc1;console[_0x132483(0x105)](_0x132483(0x112),_0x3e3668[_0x132483(0x140)]||_0x3e3668),safeCloseWebSocket(_0x570ab4);}),_0x3b388a===![]&&_0xbef5fd&&(_0x3db1d0(_0x39ffc1(0x13f)),_0xbef5fd());}function base64ToArrayBuffer(_0x5e5fd1){const _0x5bbcb6=a0_0x51b918;if(!_0x5e5fd1)return{'error':null};try{_0x5e5fd1=_0x5e5fd1[_0x5bbcb6(0x132)](/-/g,'+')[_0x5bbcb6(0x132)](/_/g,'/');const _0x54cd8a=atob(_0x5e5fd1),_0x23d91b=Uint8Array[_0x5bbcb6(0xec)](_0x54cd8a,_0x2ef4c0=>_0x2ef4c0[_0x5bbcb6(0x110)](0x0));return{'earlyData':_0x23d91b[_0x5bbcb6(0xee)],'error':null};}catch(_0x4cc956){return{'error':_0x4cc956};}}function isValidUUID(_0x468cbe){const _0x37bf13=a0_0x51b918,_0x34885d=/^[0-9a-f]{8}-[0-9a-f]{4}-[4][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}$/i;return _0x34885d[_0x37bf13(0x13e)](_0x468cbe);}const WS_READY_STATE_OPEN=0x1,WS_READY_STATE_CLOSING=0x2;function safeCloseWebSocket(_0x5d92cd){const _0x1a016b=a0_0x51b918;try{(_0x5d92cd[_0x1a016b(0x125)]===WS_READY_STATE_OPEN||_0x5d92cd[_0x1a016b(0x125)]===WS_READY_STATE_CLOSING)&&_0x5d92cd[_0x1a016b(0xf3)]();}catch(_0x596f1c){console[_0x1a016b(0x105)](_0x1a016b(0x12b),_0x596f1c);}}const byteToHex=[];for(let i=0x0;i<0x100;++i){byteToHex[a0_0x51b918(0xe3)]((i+0x100)[a0_0x51b918(0xcb)](0x10)[a0_0x51b918(0x13a)](0x1));}function unsafeStringify(_0x3f8e17,_0x5b15b6=0x0){const _0x305a8a=a0_0x51b918;return(byteToHex[_0x3f8e17[_0x5b15b6+0x0]]+byteToHex[_0x3f8e17[_0x5b15b6+0x1]]+byteToHex[_0x3f8e17[_0x5b15b6+0x2]]+byteToHex[_0x3f8e17[_0x5b15b6+0x3]]+'-'+byteToHex[_0x3f8e17[_0x5b15b6+0x4]]+byteToHex[_0x3f8e17[_0x5b15b6+0x5]]+'-'+byteToHex[_0x3f8e17[_0x5b15b6+0x6]]+byteToHex[_0x3f8e17[_0x5b15b6+0x7]]+'-'+byteToHex[_0x3f8e17[_0x5b15b6+0x8]]+byteToHex[_0x3f8e17[_0x5b15b6+0x9]]+'-'+byteToHex[_0x3f8e17[_0x5b15b6+0xa]]+byteToHex[_0x3f8e17[_0x5b15b6+0xb]]+byteToHex[_0x3f8e17[_0x5b15b6+0xc]]+byteToHex[_0x3f8e17[_0x5b15b6+0xd]]+byteToHex[_0x3f8e17[_0x5b15b6+0xe]]+byteToHex[_0x3f8e17[_0x5b15b6+0xf]])[_0x305a8a(0x120)]();}function stringify(_0x962049,_0x58ac1f=0x0){const _0x582db4=a0_0x51b918,_0x12c34c=unsafeStringify(_0x962049,_0x58ac1f);if(!isValidUUID(_0x12c34c))throw TypeError(_0x582db4(0x127));return _0x12c34c;}async function handleDNSQuery(_0x2ece71,_0x22a3b8,_0x4f855e,_0x141993){const _0x2e047c=a0_0x51b918;try{const _0x96ca17=_0x2e047c(0xcf),_0xcf9047=0x35;let _0x5e82ba=_0x4f855e;const _0x31fde2=connect({'hostname':_0x96ca17,'port':_0xcf9047});_0x141993(_0x2e047c(0xf1)+_0x96ca17+':'+_0xcf9047);const _0x1a3b73=_0x31fde2[_0x2e047c(0xde)][_0x2e047c(0x12e)]();await _0x1a3b73[_0x2e047c(0xc7)](_0x2ece71),_0x1a3b73[_0x2e047c(0x12d)](),await _0x31fde2[_0x2e047c(0xf4)][_0x2e047c(0x108)](new WritableStream({async 'write'(_0x8b59de){const _0x326831=_0x2e047c;_0x22a3b8[_0x326831(0x125)]===WS_READY_STATE_OPEN&&(_0x5e82ba?(_0x22a3b8[_0x326831(0xca)](await new Blob([_0x5e82ba,_0x8b59de])[_0x326831(0x10a)]()),_0x5e82ba=null):_0x22a3b8[_0x326831(0xca)](_0x8b59de));},'close'(){const _0xd69a5=_0x2e047c;_0x141993(_0xd69a5(0xf0)+_0x96ca17+_0xd69a5(0x118));},'abort'(_0x20bcd7){const _0x2d5d5a=_0x2e047c;console[_0x2d5d5a(0x105)](_0x2d5d5a(0xf0)+_0x96ca17+_0x2d5d5a(0xfd),_0x20bcd7);}}));}catch(_0x32e631){console[_0x2e047c(0x105)](_0x2e047c(0x11e)+_0x32e631[_0x2e047c(0xfa)]);}}async function socks5Connect(_0x1457f8,_0x4413d5,_0x3cc7e8,_0x29d342){const _0x29889c=a0_0x51b918,{username:_0x157aee,password:_0x68cda8,hostname:_0x34155d,port:_0x43c6aa}=parsedSocks5Address,_0x398dae=connect({'hostname':_0x34155d,'port':_0x43c6aa}),_0x287ec7=new Uint8Array([0x5,0x2,0x0,0x2]),_0x206f28=_0x398dae[_0x29889c(0xde)][_0x29889c(0x12e)]();await _0x206f28[_0x29889c(0xc7)](_0x287ec7),_0x29d342(_0x29889c(0x10d));const _0x1d2867=_0x398dae[_0x29889c(0xf4)][_0x29889c(0x115)](),_0x3629cd=new TextEncoder();let _0x516c5a=(await _0x1d2867[_0x29889c(0xf5)]())[_0x29889c(0x119)];if(_0x516c5a[0x0]!==0x5){_0x29d342(_0x29889c(0xf9)+_0x516c5a[0x0]+_0x29889c(0x137));return;}if(_0x516c5a[0x1]===0xff){_0x29d342(_0x29889c(0xc6));return;}if(_0x516c5a[0x1]===0x2){_0x29d342(_0x29889c(0xd1));if(!_0x157aee||!_0x68cda8){_0x29d342(_0x29889c(0x111));return;}const _0x2be377=new Uint8Array([0x1,_0x157aee[_0x29889c(0x139)],..._0x3629cd[_0x29889c(0xda)](_0x157aee),_0x68cda8[_0x29889c(0x139)],..._0x3629cd[_0x29889c(0xda)](_0x68cda8)]);await _0x206f28[_0x29889c(0xc7)](_0x2be377),_0x516c5a=(await _0x1d2867[_0x29889c(0xf5)]())[_0x29889c(0x119)];if(_0x516c5a[0x0]!==0x1||_0x516c5a[0x1]!==0x0){_0x29d342(_0x29889c(0x12a));return;}}let _0x404be2;switch(_0x1457f8){case 0x1:_0x404be2=new Uint8Array([0x1,..._0x4413d5[_0x29889c(0xcd)]('.')[_0x29889c(0xc5)](Number)]);break;case 0x2:_0x404be2=new Uint8Array([0x3,_0x4413d5[_0x29889c(0x139)],..._0x3629cd[_0x29889c(0xda)](_0x4413d5)]);break;case 0x3:_0x404be2=new Uint8Array([0x4,..._0x4413d5[_0x29889c(0xcd)](':')[_0x29889c(0xe0)](_0x59272d=>[parseInt(_0x59272d[_0x29889c(0x13a)](0x0,0x2),0x10),parseInt(_0x59272d[_0x29889c(0x13a)](0x2),0x10)])]);break;default:_0x29d342(_0x29889c(0xe1)+_0x1457f8);return;}const _0x5d5352=new Uint8Array([0x5,0x1,0x0,..._0x404be2,_0x3cc7e8>>0x8,_0x3cc7e8&0xff]);await _0x206f28[_0x29889c(0xc7)](_0x5d5352),_0x29d342(_0x29889c(0x104)),_0x516c5a=(await _0x1d2867[_0x29889c(0xf5)]())[_0x29889c(0x119)];if(_0x516c5a[0x1]===0x0)_0x29d342(_0x29889c(0x103));else{_0x29d342(_0x29889c(0xe9));return;}return _0x206f28[_0x29889c(0x12d)](),_0x1d2867[_0x29889c(0x12d)](),_0x398dae;}function socks5AddressParser(_0x28a690){const _0x498872=a0_0x51b918;let [_0x446cc5,_0x2773fd]=_0x28a690[_0x498872(0xcd)]('@')[_0x498872(0x126)](),_0x1c874a,_0x2f6fdc,_0x3e8f60,_0x5226a1;if(_0x2773fd){const _0x471a30=_0x2773fd[_0x498872(0xcd)](':');if(_0x471a30[_0x498872(0x139)]!==0x2)throw new Error(_0x498872(0xfb));[_0x1c874a,_0x2f6fdc]=_0x471a30;}const _0x5a2e11=_0x446cc5[_0x498872(0xcd)](':');_0x5226a1=Number(_0x5a2e11[_0x498872(0xfc)]());if(isNaN(_0x5226a1))throw new Error(_0x498872(0xfb));_0x3e8f60=_0x5a2e11[_0x498872(0x121)](':');const _0x518a74=/^\[.*\]$/;if(_0x3e8f60[_0x498872(0xc3)](':')&&!_0x518a74[_0x498872(0x13e)](_0x3e8f60))throw new Error(_0x498872(0xfb));return{'username':_0x1c874a,'password':_0x2f6fdc,'hostname':_0x3e8f60,'port':_0x5226a1};}function getVLESSConfig(_0x4e512c,_0x4e649d){const _0x244893=a0_0x51b918,_0x27fb0b=_0x244893(0xd4),_0x3786f0=''+_0x27fb0b+(_0x244893(0x11a)+_0x4e512c+'@'+_0x4e649d+_0x244893(0xf2))+(_0x244893(0xdb)+_0x4e649d+_0x244893(0x131)+_0x4e649d+_0x244893(0x10b)+_0x4e649d);return _0x244893(0x11d)+_0x3786f0+_0x244893(0x11b)+_0x4e649d+_0x244893(0xce)+_0x4e649d+_0x244893(0x12c)+_0x4e512c+_0x244893(0xd7)+_0x4e649d+_0x244893(0xe4)+_0x4e649d+_0x244893(0xf6);}
