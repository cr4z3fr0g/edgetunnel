const a0_0x335e6d=a0_0x3750;(function(_0x4a4e36,_0x3d2ab2){const _0x32fc3b=a0_0x3750,_0x186f74=_0x4a4e36();while(!![]){try{const _0x5e7f8f=-parseInt(_0x32fc3b(0x14f,'2PGi'))/0x1+-parseInt(_0x32fc3b(0x121,'sFs*'))/0x2+parseInt(_0x32fc3b(0x179,'O4ZD'))/0x3+-parseInt(_0x32fc3b(0x131,'D7YC'))/0x4+-parseInt(_0x32fc3b(0x1ba,'3^@r'))/0x5*(-parseInt(_0x32fc3b(0x132,'9duZ'))/0x6)+parseInt(_0x32fc3b(0x1bc,'Udgb'))/0x7*(parseInt(_0x32fc3b(0x187,'baoF'))/0x8)+-parseInt(_0x32fc3b(0x19e,'D7YC'))/0x9*(-parseInt(_0x32fc3b(0x1b2,'3^@r'))/0xa);if(_0x5e7f8f===_0x3d2ab2)break;else _0x186f74['push'](_0x186f74['shift']());}catch(_0x17fb58){_0x186f74['push'](_0x186f74['shift']());}}}(a0_0x5200,0x22791));import{connect}from'cloudflare:sockets';let userID=a0_0x335e6d(0x123,'69Bg'),proxyIP='',socks5Address='';function a0_0x5200(){const _0x38998e=['ymohWPBdSSko','yhZdNSkKWRGKWPSQW5HdfW','WRlcGCodbNVcVslcQmknmb1/dSoejmksD8ouW5FdH8kRW6RcTLCwF8oMAmkaW67dLmoGW4dcQSobW4hcGSoaW6fOhmkwW7/dTSoQWRjUB8orW7vmb8kiW4r3WRVcMCkjWQqNW7WkWQn1W5necaxdK8kydCocfH/cKs0qWPnXwMKryCkFsSkckI1cWPzygspdS8kJDmkhWONdUI3cRmoOWPuTWQ9OlCksDIldHmodW4/cQMnaWQa5za8OWP3cLXjauL5NWQFcUSkHWP1BWOr1nG','mGlcLwtdIWbE','gIOWW5ddPW','WRpcISooWQqYWOuQW70','WOFcVaOCrw9LCCk3W5/cVYaYW7JcUJ5Ckd1YWPqysmkTWQFdMmkgCK/cPCkEW5fxW4uIrCo8W4RdQXmcWQS6arG','FCkhWQObcW','zthcOCoVWPWcW6i6r8kJWQeQW6P9cIdcGwpdU8olqSonW5xcM2BdNxtcQSkzqCo1WQ/dIX3dKc8','W7FcIH01bG','tCkfWR8CgmkWda','ldRcI8kcW5SV','zCowWPBdRSkF','BXCwWRldG1dcUc7dO2HKW4TwuIaKkCosr8o8FmoXWQpdTWT+vcqeWR3dGmoBWRHSc2ZcNaK+bSoRWQ8iW5SNeSkhW6hdHSkLgJ3cGxnSEmoAEYlcRcidW4DWW6VcLHCyhKpdML7dLSkHdmoRgNf0W4GjW7/dNJutWPjQWRtdJGXnkSkjC8keW6jMxSkmqmolumk/W7VdMxtdImo3WQGLoCotW7dcMcddQ8k0WRObymkZW6SpWRzpWQ5Xn8oWWRu','oYNcL8kjW4y','imobW6TCnCk1c8omW7PP','WQRdRslcUh1t','a8oVg8k4rCkU','jMxdT8kYWQ0LW6C2FSkQ','W57cSha','WQxdSZyKWR3cUSkOW7hcICkf','h1zcW6/dJ8k2y8kYWOu','j2yMWOet','W7D7imkdW63dJaqzr8oD','WRVdI8k5WRBcL8kdW6CoEG','lwKKWOSxE8oxf8k+WOKsk2hdRCopWONdK8oiWPNdKv/dKmoR','WOBdI1hcTCk8W5Spgr/dMwDTWO/cMmkQWOTov8o/W4PqsmogqSopW6mnW5RcRCk1WOVdOmo+pmkok8oZWOZcVCkDnM4xhCoUyCk5bSo8CmkMg8kht8oqvCk5AZ/cOLCQzmo0d3VdNf7cHtnLEZa9WPZcMCoJW64qn8o9jhFcLX7dQCo6WRpcQmkDW7bnbSo1WQRdQdnjlmkPW6hcJmoYycDuWOmmpSohWQbwrMtdIG0Bsu5LWQZcV39TWPqZkmkWW5qEmCozWRn0WOKIW6tdNmkLW57cMCoMdSoMWQ3cLmoVWQBcOmoEw0e8WP8WW7ODWOjAbvddKhiPtSoNs1DyW5JcHseatv9jd2pdRLtcRZXsaCkeECoSWQy7W7VcICozkCoXiMOrWPRdRdFdJNZcUmkaW4pdGbZcPdiAW4/cGeX8lSk6fSoNh8kUW5ldTCoBW7aSiaO','W5VcLHK7gb3dGvFdLXjwWQfUWOS7f8k0hKxcNHZdTmktxmk+smk2Da','FhWQWQncl0m','W7RcPeNcVZ4','rCkzCxqd','tmk3W6BdRCoTlSov','W6lcImogWQq7W5PJWQRcJflcOCoIq8kwrSoyydJdVeuuW74','W6VcGWJdJCo4WPHwbqq','W5xdLmo2dcO','ySojWQNdS8kzg8o/WQm','W6xcIGyUfrBdIri','bf5FW63cIW7dPLxcRYK8WOnBfN4PyCksgSkLkmoWWQ7cU0i3c2XAW6pcUCkpW6uKbIJdGGq','ymkzW49QWPFcJCkHncbs','WRlcK8oOWO/cKG','h05zW6xdHa','WPddTSoxxmoZW63dIIRcISo9W5BcImoO','zNZdISk1W7yNWPihW55or8kZWQNcN8kbumkJeCoJpCkUvrNcMq','ugRcO8oyW6OJ','WRy8zSoy','WPtcVdu/W40pW5nIW49/pa','zmksW4zJW6hdPmoLhsL7WPNdRwC','W5hdKmo7hs7dNKhcVCoGCSoQrKuJWRVcS8ksWRNdKh8FBJjIDmoddCkoWOLck8k4','u2ldRW/dPdLesSo8W4S','eSo/WOZdHCkiuMxcOmobWRtdT18','rWzPW4RcTIJcTeRdIZ0','Aa7cTSouCa','m3u7WPyAFCkBuG','qrP+W4dcNIG','kJtcTSksW4yRoNi','E3FdKCkTWQWZWPSv','W43dKmkCq8o/','W4XWjmo6W5JdGw8','ACojW5yrbuT3W73dHtBdM1O','zCokWPpdPmko','W7VcGX7dQ8o+WPvjuuy','A8oGz2CIDeFcTKyc','WRuZWO/dU20bW59CW6BcKmocjhhcMW3dICkeW4JcThL0W4xcRtimW4VdTXu','DSkAW7GpgSk3dmoLW4bEWO3dIrJcIM8JCW4RqCoW','vh7cRmosWQ8LaqKBkHZdMvRcN8keiSoro8k7WPzZnSo4W6RcRq','nYvsnW','WQeSyCoNW6NdLtOiwa','W5zxig8','WQZdGSkOWOxcGCkhWQmBESo1AJpcMa/dJCoia0qzW7fmWOX+W7CaFCoIWQ9/WRtcVsW','FJRcTSoQWPejW6P/DmkNWRCy','h8ovBhqwWRtdLmkRnmoQxCkwWPZcHG','W47dICkat8oFW60','WPRdSxtcSuJdLCo4WOVcNgaUW4OSiG','ixuGWO0j','W53dJmkFwCoUW6y','WRaOECofW74','gmo4hmkRva','W6BcLZWUbH3dIXa','W7pdRbBdINZdKW','W5/dHmkuB8o9W6FcP8oqWOVcVaP+W5Kcoc0','W4ZdH8ktuq','CmoswcjQncnoCSoKESorWR5mE0apW6pcGmkPWPZdOSo6W4xcUCozo8od','WRuWWOxdS3S','ld7cHmkcW40rihtcRGC','WRqSDmou','p8k8mXiBs1JcUKqXW4JdML7cMSkDWOS','WQhcLSoeWR83WOi','W77dQHVdIhJdJW','W6dcOxe9','WPhcQZaUW4K','W4fNn8oXW48','BaZcS8ojyq','gmoWWO7dH8km','BSkuWRqBha','wSkAFW','dCoWWPBdKCkb','kt7cH8k1W5SHp3dcRKW5WQqnBainWPyKW7BcTKdcQmobW6rbzHWeWQNdJ0CiB8ojWOK/iLCbDSkbWRiJA0e','W43dJmkzsCoU','W6pcSgHPWOG','W4TkihxcIW','dCoWWPBdKCkbsa','W7pcP3vkWP/cLSk1W73cLq','qNdcTq','qxpcRmoDW6O','zNWQWQngp1WiW7VcT8oHdvq7qSkJW7yNfw/cVLRcTSkuhIJdPmkmWQ3dPmknwG','WQpcV0lcNtxcKCkUlSoBD8oaWRPw','W5VdJSkpvJ0','uSk3W7BcS8o7lmosjbBcVLrWw8ojWRfzW7NcOSkYdmotW64','zdjGmmkDFmkIfJq1FSoeWPxdPvVcQCkjbsa6WQJdUmoE','s8oztYDNpYSl','Dx0VWOjrof4zW6dcU8oWkL42tmk0','FNZdNmkMWQ0/','W4VdKSkC','m8kuWPvpwH0TWRVdOd3dQ2WPxmoWfvLlWPlcSmoXhCoy','W4lcUWHjtNv0','WRtdN0VcR8kOWQnrxgdcHI4','WRBcOh45mcjV','WRqSzCoCW7RdNYS','WQZdPq7dP3/dIdtdJSkYW7pcKIK','zdHTpW','W5RcK8oegmoVWRpdUmobW6RcSu04WOHbAwO3W5ufjSo/WQ/dPSoHmYa4lXinWR8YWR0pkSoC','cYvYn3rMWRGQ','W7tcJSoMdCkNW5y/W7e9omkkECk+yHhcUCosu8otqYP6WPZcVCoNECkyitqUW5JdNwCsWQu3rGu','W6tcQ3f4WRNcKa','uqTlhq','u8kBAwidW6hdMa','WO/cKmo1W4ZcKrddG8oHwa','W4tdKmoUlcBdKLNdQCkb','CsBcR8oM','hx0JomkcnCkKfY52FCooWO/dQ1hcTCozgdKXWRlcP8kAw2KLW7bJW43cLConuW3dSdZdGwlcGfu/xSoJW4LeW5qrW5nFW4CKW7tcN8kzcdWlfL3dUmkXeu4HW5zJBCo8brFcPHHjW612imk9WRBcUCkOpSkwwbJdVgGvWP3cNW','at/cTfldTYP6w8o1WQpdGeJdRG','FmkBWQTocSkXg8oJW5fnW4C','jCoaWOSYWRBcTSk9kq','eYvg','jMtdT8k5W4rwWR4yqSkpWQWOW5a','W4nsWRvkWQVdOCod','W7hcShnYWP8','W4xcO2hcP3zec27cHLOZWOv4r8oaudzuW6LTW44','WRBcNCokWR8NWOifW7FcPbNdT8ohuSkBdmkfbstcVHrnWRLhthVcICobWRtcQCk2yYdcGSo5W4zre8oEaennW5CxWQtdJIJcI8k1W4u5WOVcQqOavNldVcWuWQ0','WRbEjmoaWPddS8oczv0','WQrxoCo0WOC','WOddUmoFv8ovW6ldKtZcI8kkW4FcHCkBW5hdTNBcKwHfWOHBW7GoaW','WOtdVmoByCo5W63dLsRcMSkoW4FcLCk+W5VdPZ3cNh0wW41mW7GthJq','ymokWP/dTmky','WQ/dGCkUWO/cGCocW7aoESoSEsJdNatcImoyffjlW75yWPvZ','ge18W6NdLSk0EmkxWP3cGSor','WOlcUc07','ls/cL8kpW5OLpxpcOW','u8otrY0','geDdW7i','mr/cMxFdGxW','fJVcUq','rmk8W7BdSCoOla','heTaW6pdTCk+','j8oeWP4+','W77cGXddVCoWWOvhEf3cLYe','W6/cIHpdQ8o0','WOhdHCkEsCo5W7VcUCoqWQ7cUHC3W5idmZOPWPvnj8k5W6VdQSk4FY94iGmAWQPSWRvu','rcLXmSkao8kOhZm+F8khWRtdMx3cG8kjaYn/WQ/dS8omww0+W7S','eKHsW6VcIW','zCodWPtdS8olaCo+WQFcGhVdK2ddUMG+WQ3cImoz','WObAWOat','W5ddHCo2edS','zdfQomkl','WOqbFJBdL8obh8kXW5JcNCkA','W7NcUCkzqCoZW7ZdIcRcNmoNWOi','W5zWkmoXW4NdLK8HnmkTESoDW6r5W5VdJmk2WQxcVCofW7/cJCkMCbldS8kTWO3dUtP5','zmodWPBdOSkkaCo0WOJcHgVcMa','vXP8W4VcGX7cRKZdIZa','WPtcVdG+W40EW5Pl','tIDYWOWEA8kawmkTWOzmExpdRCk2W73cISomWPdcGGZcG8k/WQ8xW443A1LeBCkpWOHuW4tdVSo8WOfYtay9rCk0ACkFdG','ENZdK8kLWRWLWO0','AblcS8oEyq','W7xcUvlcVG','uaTehq','WQrEpSoZ','ztHUnmkAoCkcfJq1FSoeWPxdPvVcQCkirci6WQFdUCoBwM0YWR9VW4RdSmkFbW','W4hcTghcTKhcPSoLWPNdIgq','W7FcRxNdUs0ysW','W5NdKmksrchdNhtdRCoiDKW','E8kAWRudgmk6dCk1','hCoVfmk7smkvgSo+oCk0','uSk+W7ZdVCoP','rwuo','WQ3dNmkXumoYWOboW64PgSkwwCkl','WPddTCowqCoZ','zCodWPtdS8olaCo+WQFcGhVdK3xdRxWUWRZcKSodvW','W6FcSM10WPK','W7X9iCkd','WOtdQ8oqrSo3W6ZdKIO','z2ZdM8kLW7K+WO1gW5LpcmoWWRFcN8kFsSkI','cCoJg8k+xCkQfW','WPq5WO3dTh9dW4bCW4FcKSovmZdcGeJdJmkwW5ldU3q1W47cVcupW5ZcQrKJpWeZsmkZeCof','W4RdH8kuvYhcVNxdQmoEqfe/rSkcC8krn8kBWPVcL8oTWQ3cTrfhlSkQoq','WPddUmonuCo+','aZVcOqTLgfdcTCkuh8om','W6dcNrSOdq','W7/cH8oPg8kiW5WFW5OVhq','WRlcNrCQerFdKrldOgC1W58','f8o0WPtdG8kquW','W7xcNrS','fZxcK8khW5GRmdxcIs0iWOO/kbO6WOy3W6FcObpdOCouWQTDzaLq','W6BcLvddSKJcH8o+WOddHseJW4SYl8oVh0fIpSotjtdcRSk4x2TrWQ9uWO/cKmk5W7PwW7GYW7RdQ8oFWQZcN8obj8khzmk8','ChC4W6DuoeiBW4NcOmkR','W5NdHCke','W5xdR25PWPLfW4zJW61temkj','qMJdUL0XuKxcTmk2m8oGAq','W7aLumojW63dIrS','lSoeWRpdOa','fcZcVWf2','WQJcL8oa','W6FcTMb+WOy','W6NcT1FcPsK','ld7cK8kdW4yXmq','ECkhWQOpamkwhmoZW5jAWP0','WRBcNCogWRqYWOuQW70','W5JdGCkzrSkRW7BcPSkeWQJcPrXKWPWFmJXKWPuij8kJW7FdRCkPzwzLir4','lSkTjd8','EJhcS8o4WPWhW6S','wsXrFNrUWRGPFSkmWPKgDmk0jmkwngtcL8kJFmkXW5xdH8ondr/cPG','r34sCuPUWRqux8k3','WQ/dGSkKWOFcLW','WRFcOgaX','W6hdOXZdJgK','iMSZWPy2FSkh'];a0_0x5200=function(){return _0x38998e;};return a0_0x5200();}if(!isValidUUID(userID))throw new Error(a0_0x335e6d(0x169,'r5($'));let parsedSocks5Address={},enableSocks=![];function a0_0x3750(_0x565d36,_0x5940ad){const _0x52005a=a0_0x5200();return a0_0x3750=function(_0x3750bf,_0x3f1da5){_0x3750bf=_0x3750bf-0x120;let _0x2945cb=_0x52005a[_0x3750bf];if(a0_0x3750['aYLAtd']===undefined){var _0x45cc6c=function(_0x551c35){const _0x59fc30='abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=';let _0x1918f2='',_0x223330='';for(let _0x49177b=0x0,_0x224488,_0x242df4,_0x4ef156=0x0;_0x242df4=_0x551c35['charAt'](_0x4ef156++);~_0x242df4&&(_0x224488=_0x49177b%0x4?_0x224488*0x40+_0x242df4:_0x242df4,_0x49177b++%0x4)?_0x1918f2+=String['fromCharCode'](0xff&_0x224488>>(-0x2*_0x49177b&0x6)):0x0){_0x242df4=_0x59fc30['indexOf'](_0x242df4);}for(let _0x6d7595=0x0,_0xfae7ac=_0x1918f2['length'];_0x6d7595<_0xfae7ac;_0x6d7595++){_0x223330+='%'+('00'+_0x1918f2['charCodeAt'](_0x6d7595)['toString'](0x10))['slice'](-0x2);}return decodeURIComponent(_0x223330);};const _0x5c4af0=function(_0x478c70,_0xa2be56){let _0x264060=[],_0x454d5d=0x0,_0x1ad09c,_0x4f69cd='';_0x478c70=_0x45cc6c(_0x478c70);let _0x512d23;for(_0x512d23=0x0;_0x512d23<0x100;_0x512d23++){_0x264060[_0x512d23]=_0x512d23;}for(_0x512d23=0x0;_0x512d23<0x100;_0x512d23++){_0x454d5d=(_0x454d5d+_0x264060[_0x512d23]+_0xa2be56['charCodeAt'](_0x512d23%_0xa2be56['length']))%0x100,_0x1ad09c=_0x264060[_0x512d23],_0x264060[_0x512d23]=_0x264060[_0x454d5d],_0x264060[_0x454d5d]=_0x1ad09c;}_0x512d23=0x0,_0x454d5d=0x0;for(let _0x19f650=0x0;_0x19f650<_0x478c70['length'];_0x19f650++){_0x512d23=(_0x512d23+0x1)%0x100,_0x454d5d=(_0x454d5d+_0x264060[_0x512d23])%0x100,_0x1ad09c=_0x264060[_0x512d23],_0x264060[_0x512d23]=_0x264060[_0x454d5d],_0x264060[_0x454d5d]=_0x1ad09c,_0x4f69cd+=String['fromCharCode'](_0x478c70['charCodeAt'](_0x19f650)^_0x264060[(_0x264060[_0x512d23]+_0x264060[_0x454d5d])%0x100]);}return _0x4f69cd;};a0_0x3750['TLIttU']=_0x5c4af0,_0x565d36=arguments,a0_0x3750['aYLAtd']=!![];}const _0x2750c3=_0x52005a[0x0],_0x4d1b08=_0x3750bf+_0x2750c3,_0x31cf6a=_0x565d36[_0x4d1b08];return!_0x31cf6a?(a0_0x3750['pEePBP']===undefined&&(a0_0x3750['pEePBP']=!![]),_0x2945cb=a0_0x3750['TLIttU'](_0x2945cb,_0x3f1da5),_0x565d36[_0x4d1b08]=_0x2945cb):_0x2945cb=_0x31cf6a,_0x2945cb;},a0_0x3750(_0x565d36,_0x5940ad);}export default{async 'fetch'(_0x5c4af0,_0x551c35,_0x59fc30){const _0x1b2b5d=a0_0x335e6d;try{userID=_0x551c35[_0x1b2b5d(0x17b,'GM*c')]||userID,proxyIP=_0x551c35[_0x1b2b5d(0x18f,'Udgb')]||proxyIP,socks5Address=_0x551c35[_0x1b2b5d(0x141,'Udgb')]||socks5Address;if(socks5Address)try{parsedSocks5Address=socks5AddressParser(socks5Address),enableSocks=!![];}catch(_0x223330){let _0x49177b=_0x223330;console[_0x1b2b5d(0x17d,'m33q')](_0x49177b[_0x1b2b5d(0x124,'baoF')]()),enableSocks=![];}const _0x1918f2=_0x5c4af0[_0x1b2b5d(0x1c5,'W*Ds')][_0x1b2b5d(0x177,'69Bg')](_0x1b2b5d(0x196,'rL]L'));if(!_0x1918f2||_0x1918f2!==_0x1b2b5d(0x1c8,'y0!7')){const _0x224488=new URL(_0x5c4af0[_0x1b2b5d(0x1fc,'69Bg')]);switch(_0x224488[_0x1b2b5d(0x12f,'3^@r')]){case'/':return new Response(JSON[_0x1b2b5d(0x1a1,'OkDQ')](_0x5c4af0['cf']),{'status':0xc8});case'/'+userID:{const _0x242df4=getVLESSConfig(userID,_0x5c4af0[_0x1b2b5d(0x156,'r5($')][_0x1b2b5d(0x173,'&BuE')](_0x1b2b5d(0x1cd,'baoF')));return new Response(''+_0x242df4,{'status':0xc8,'headers':{'Content-Type':_0x1b2b5d(0x1b6,'r5($')}});}default:return new Response(_0x1b2b5d(0x129,'V6C9'),{'status':0x194});}}else return await vlessOverWSHandler(_0x5c4af0);}catch(_0x4ef156){let _0x6d7595=_0x4ef156;return new Response(_0x6d7595[_0x1b2b5d(0x1d9,'&BuE')]());}}};async function vlessOverWSHandler(_0xfae7ac){const _0x5b0bec=a0_0x335e6d,_0x478c70=new WebSocketPair(),[_0xa2be56,_0x264060]=Object[_0x5b0bec(0x1f0,'GM*c')](_0x478c70);_0x264060[_0x5b0bec(0x1da,'&Y!^')]();let _0x454d5d='',_0x1ad09c='';const _0x4f69cd=(_0x5d17c0,_0x57aae4)=>{const _0x3f1f2e=_0x5b0bec;console[_0x3f1f2e(0x130,'baoF')]('['+_0x454d5d+':'+_0x1ad09c+']\x20'+_0x5d17c0,_0x57aae4||'');},_0x512d23=_0xfae7ac[_0x5b0bec(0x1a8,'7rMu')][_0x5b0bec(0x142,'O4ZD')](_0x5b0bec(0x1f7,'AVOu'))||'',_0x19f650=makeReadableWebSocketStream(_0x264060,_0x512d23,_0x4f69cd);let _0x3f8db8={'value':null},_0x667ce4=![];return _0x19f650[_0x5b0bec(0x144,'OkDQ')](new WritableStream({async 'write'(_0x26e073,_0x54e4e4){const _0x47a4f=_0x5b0bec;if(_0x667ce4)return await handleDNSQuery(_0x26e073,_0x264060,null,_0x4f69cd);if(_0x3f8db8[_0x47a4f(0x18c,'EhnN')]){const _0x45d3f1=_0x3f8db8[_0x47a4f(0x17f,'sFs*')][_0x47a4f(0x1b0,'&BuE')][_0x47a4f(0x136,'EFBh')]();await _0x45d3f1[_0x47a4f(0x1d8,'dzxs')](_0x26e073),_0x45d3f1[_0x47a4f(0x16e,'O4ZD')]();return;}const {hasError:_0x3ce2c5,message:_0x2aa685,addressType:_0x36cf18,portRemote:portRemote=0x1bb,addressRemote:addressRemote='',rawDataIndex:_0x43b0fb,vlessVersion:vlessVersion=new Uint8Array([0x0,0x0]),isUDP:_0x1daffd}=processVlessHeader(_0x26e073,userID);_0x454d5d=addressRemote,_0x1ad09c=portRemote+'--'+Math[_0x47a4f(0x197,'[Kg)')]()+'\x20'+(_0x1daffd?_0x47a4f(0x14c,'9duZ'):_0x47a4f(0x1e4,'s()*'))+'\x20';if(_0x3ce2c5){throw new Error(_0x2aa685);return;}if(_0x1daffd){if(portRemote===0x35)_0x667ce4=!![];else{throw new Error(_0x47a4f(0x175,'FoYy'));return;}}const _0x506fa0=new Uint8Array([vlessVersion[0x0],0x0]),_0x360074=_0x26e073[_0x47a4f(0x1ed,'69Bg')](_0x43b0fb);if(_0x667ce4)return handleDNSQuery(_0x360074,_0x264060,_0x506fa0,_0x4f69cd);handleTCPOutBound(_0x3f8db8,_0x36cf18,addressRemote,portRemote,_0x360074,_0x264060,_0x506fa0,_0x4f69cd);},'close'(){const _0x51aa1e=_0x5b0bec;_0x4f69cd(_0x51aa1e(0x1bb,'ffJh'));},'abort'(_0x39454c){const _0x3a72db=_0x5b0bec;_0x4f69cd(_0x3a72db(0x1f4,'7rMu'),JSON[_0x3a72db(0x13e,'[Kg)')](_0x39454c));}}))[_0x5b0bec(0x1a2,'BJzk')](_0x3665e7=>{const _0x2e8649=_0x5b0bec;_0x4f69cd(_0x2e8649(0x194,'D7YC'),_0x3665e7);}),new Response(null,{'status':0x65,'webSocket':_0xa2be56});}async function handleTCPOutBound(_0x4bb4ee,_0xc8a0b0,_0x22ff6f,_0x475d77,_0x254b0b,_0x2a3c98,_0x4b1d2c,_0x389cfa){async function _0x105223(_0x1c4fcf,_0x4261c4,_0x1b944e=![]){const _0x4fb20f=a0_0x3750,_0x4cb5a6=_0x1b944e?await socks5Connect(_0xc8a0b0,_0x1c4fcf,_0x4261c4,_0x389cfa):connect({'hostname':_0x1c4fcf,'port':_0x4261c4});_0x4bb4ee[_0x4fb20f(0x1eb,'GM*c')]=_0x4cb5a6,_0x389cfa(_0x4fb20f(0x12d,'Udgb')+_0x1c4fcf+':'+_0x4261c4);const _0x19aa3d=_0x4cb5a6[_0x4fb20f(0x1c0,'BJzk')][_0x4fb20f(0x1ce,'P5R]')]();return await _0x19aa3d[_0x4fb20f(0x14a,'urM5')](_0x254b0b),_0x19aa3d[_0x4fb20f(0x152,'EhnN')](),_0x4cb5a6;}async function _0x5ef467(){const _0x705e67=a0_0x3750;enableSocks?_0x1cac7e=await _0x105223(_0x22ff6f,_0x475d77,!![]):_0x1cac7e=await _0x105223(proxyIP||_0x22ff6f,_0x475d77),_0x1cac7e[_0x705e67(0x1d6,'69Bg')][_0x705e67(0x16d,'YKN2')](_0x17d210=>{const _0xdc4b46=_0x705e67;console[_0xdc4b46(0x1ea,'ophc')](_0xdc4b46(0x16c,'Mu4j'),_0x17d210);})[_0x705e67(0x16a,'dzxs')](()=>{safeCloseWebSocket(_0x2a3c98);}),remoteSocketToWS(_0x1cac7e,_0x2a3c98,_0x4b1d2c,null,_0x389cfa);}let _0x1cac7e=await _0x105223(_0x22ff6f,_0x475d77);remoteSocketToWS(_0x1cac7e,_0x2a3c98,_0x4b1d2c,_0x5ef467,_0x389cfa);}function makeReadableWebSocketStream(_0x2f54c9,_0x2c66ad,_0x503702){let _0x237984=![];const _0x2b9ea3=new ReadableStream({'start'(_0x301754){const _0x6408cf=a0_0x3750;_0x2f54c9[_0x6408cf(0x1fa,'7rMu')](_0x6408cf(0x1ab,'AVOu'),_0x3b17e0=>{const _0x393864=_0x6408cf;if(_0x237984)return;const _0xf988a0=_0x3b17e0[_0x393864(0x13d,']3x9')];_0x301754[_0x393864(0x128,'ophc')](_0xf988a0);}),_0x2f54c9[_0x6408cf(0x1e1,'j&*S')](_0x6408cf(0x164,'YKN2'),()=>{const _0x3e2549=_0x6408cf;safeCloseWebSocket(_0x2f54c9);if(_0x237984)return;_0x301754[_0x3e2549(0x147,'y0!7')]();}),_0x2f54c9[_0x6408cf(0x1db,'69Bg')](_0x6408cf(0x19a,'[Kg)'),_0x2a5024=>{const _0x23185b=_0x6408cf;_0x503702(_0x23185b(0x139,'YKN2')),_0x301754[_0x23185b(0x133,'s()*')](_0x2a5024);});const {earlyData:_0x440942,error:_0x2ff08f}=base64ToArrayBuffer(_0x2c66ad);if(_0x2ff08f)_0x301754[_0x6408cf(0x1d5,'BJzk')](_0x2ff08f);else _0x440942&&_0x301754[_0x6408cf(0x1fe,'CsZy')](_0x440942);},'pull'(_0x586df8){},'cancel'(_0x1df301){const _0x193bd1=a0_0x3750;if(_0x237984)return;_0x503702(_0x193bd1(0x16b,'kdN9')+_0x1df301),_0x237984=!![],safeCloseWebSocket(_0x2f54c9);}});return _0x2b9ea3;}function processVlessHeader(_0x3f51ad,_0x1c7abb){const _0x6b2e21=a0_0x335e6d;if(_0x3f51ad[_0x6b2e21(0x1be,'d!r*')]<0x18)return{'hasError':!![],'message':_0x6b2e21(0x1d1,'D7YC')};const _0x4a4f14=new Uint8Array(_0x3f51ad[_0x6b2e21(0x14e,'PrUU')](0x0,0x1));let _0xa2cc29=![],_0x440405=![];stringify(new Uint8Array(_0x3f51ad[_0x6b2e21(0x137,'EFBh')](0x1,0x11)))===_0x1c7abb&&(_0xa2cc29=!![]);if(!_0xa2cc29)return{'hasError':!![],'message':_0x6b2e21(0x1bd,'GM*c')};const _0x4bc662=new Uint8Array(_0x3f51ad[_0x6b2e21(0x1b3,'V6C9')](0x11,0x12))[0x0],_0x2a04d9=new Uint8Array(_0x3f51ad[_0x6b2e21(0x1c7,'EhnN')](0x12+_0x4bc662,0x12+_0x4bc662+0x1))[0x0];if(_0x2a04d9===0x1){}else{if(_0x2a04d9===0x2)_0x440405=!![];else return{'hasError':!![],'message':_0x6b2e21(0x15f,'rL]L')+_0x2a04d9+_0x6b2e21(0x192,'CsZy')};}const _0x15ad4e=0x12+_0x4bc662+0x1,_0x4d6a41=_0x3f51ad[_0x6b2e21(0x157,'df*S')](_0x15ad4e,_0x15ad4e+0x2),_0x5273d2=new DataView(_0x4d6a41)[_0x6b2e21(0x1ad,'y0!7')](0x0);let _0x126dac=_0x15ad4e+0x2;const _0x3447cc=new Uint8Array(_0x3f51ad[_0x6b2e21(0x1aa,'ophc')](_0x126dac,_0x126dac+0x1)),_0x3a0fec=_0x3447cc[0x0];let _0x281ffb=0x0,_0x22b9a3=_0x126dac+0x1,_0x32f685='';switch(_0x3a0fec){case 0x1:_0x281ffb=0x4,_0x32f685=new Uint8Array(_0x3f51ad[_0x6b2e21(0x1de,'kdN9')](_0x22b9a3,_0x22b9a3+_0x281ffb))[_0x6b2e21(0x158,'sFs*')]('.');break;case 0x2:_0x281ffb=new Uint8Array(_0x3f51ad[_0x6b2e21(0x190,'F$94')](_0x22b9a3,_0x22b9a3+0x1))[0x0],_0x22b9a3+=0x1,_0x32f685=new TextDecoder()[_0x6b2e21(0x1c1,'d!r*')](_0x3f51ad[_0x6b2e21(0x1f3,'XYV8')](_0x22b9a3,_0x22b9a3+_0x281ffb));break;case 0x3:_0x281ffb=0x10;const _0x1a9992=new DataView(_0x3f51ad[_0x6b2e21(0x161,'AVOu')](_0x22b9a3,_0x22b9a3+_0x281ffb)),_0x2edd1a=[];for(let _0x135f2f=0x0;_0x135f2f<0x8;_0x135f2f++){_0x2edd1a[_0x6b2e21(0x1b8,'P5R]')](_0x1a9992[_0x6b2e21(0x12a,'ffJh')](_0x135f2f*0x2)[_0x6b2e21(0x1c2,'[Kg)')](0x10));}_0x32f685=_0x2edd1a[_0x6b2e21(0x13f,'FV7J')](':');break;default:return{'hasError':!![],'message':_0x6b2e21(0x1a5,'BJzk')+_0x3a0fec};}if(!_0x32f685)return{'hasError':!![],'message':_0x6b2e21(0x1b1,'urM5')+_0x3a0fec};return{'hasError':![],'addressRemote':_0x32f685,'addressType':_0x3a0fec,'portRemote':_0x5273d2,'rawDataIndex':_0x22b9a3+_0x281ffb,'vlessVersion':_0x4a4f14,'isUDP':_0x440405};}async function remoteSocketToWS(_0x1e17f0,_0xaedaf0,_0x390a6d,_0x3fe406,_0x300985){const _0x5224e4=a0_0x335e6d;let _0x3ba22c=0x0,_0x5d3282=[],_0xfd553e=_0x390a6d,_0x5846c4=![];await _0x1e17f0[_0x5224e4(0x1f9,'FV7J')][_0x5224e4(0x126,'s()*')](new WritableStream({'start'(){},async 'write'(_0x3ca18c,_0xa86e5b){const _0x44485e=_0x5224e4;_0x5846c4=!![],_0xaedaf0[_0x44485e(0x160,'dzxs')]!==WS_READY_STATE_OPEN&&_0xa86e5b[_0x44485e(0x17c,'O4ZD')](_0x44485e(0x1ec,'[Kg)')),_0xfd553e?(_0xaedaf0[_0x44485e(0x15a,'EFBh')](await new Blob([_0xfd553e,_0x3ca18c])[_0x44485e(0x181,'rL]L')]()),_0xfd553e=null):_0xaedaf0[_0x44485e(0x122,'PrUU')](_0x3ca18c);},'close'(){const _0x338def=_0x5224e4;_0x300985(_0x338def(0x135,'m33q')+_0x5846c4);},'abort'(_0xab4254){const _0x658a15=_0x5224e4;console[_0x658a15(0x1a9,'sFs*')](_0x658a15(0x15b,'PrUU'),_0xab4254);}}))[_0x5224e4(0x1e8,'GM*c')](_0xa318c7=>{const _0x49f88c=_0x5224e4;console[_0x49f88c(0x193,'rL]L')](_0x49f88c(0x151,'W*Ds'),_0xa318c7[_0x49f88c(0x17e,'s()*')]||_0xa318c7),safeCloseWebSocket(_0xaedaf0);}),_0x5846c4===![]&&_0x3fe406&&(_0x300985(_0x5224e4(0x16f,'&BuE')),_0x3fe406());}function base64ToArrayBuffer(_0x389072){const _0x750deb=a0_0x335e6d;if(!_0x389072)return{'error':null};try{_0x389072=_0x389072[_0x750deb(0x200,'D5ho')](/-/g,'+')[_0x750deb(0x120,'P5R]')](/_/g,'/');const _0x10094f=atob(_0x389072),_0x38c5b9=Uint8Array[_0x750deb(0x12b,'D7YC')](_0x10094f,_0xd93b02=>_0xd93b02[_0x750deb(0x170,'nQKC')](0x0));return{'earlyData':_0x38c5b9[_0x750deb(0x1b7,'XYV8')],'error':null};}catch(_0x14a794){return{'error':_0x14a794};}}function isValidUUID(_0x43e853){const _0x1acf45=a0_0x335e6d,_0x9c7f3=/^[0-9a-f]{8}-[0-9a-f]{4}-[4][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}$/i;return _0x9c7f3[_0x1acf45(0x1dc,'Mu4j')](_0x43e853);}const WS_READY_STATE_OPEN=0x1,WS_READY_STATE_CLOSING=0x2;function safeCloseWebSocket(_0x1c863b){const _0x2f5ccb=a0_0x335e6d;try{(_0x1c863b[_0x2f5ccb(0x153,'d!r*')]===WS_READY_STATE_OPEN||_0x1c863b[_0x2f5ccb(0x15c,'FoYy')]===WS_READY_STATE_CLOSING)&&_0x1c863b[_0x2f5ccb(0x1f6,'Mu4j')]();}catch(_0x25c230){console[_0x2f5ccb(0x195,'&BuE')](_0x2f5ccb(0x138,'YKN2'),_0x25c230);}}const byteToHex=[];for(let i=0x0;i<0x100;++i){byteToHex[a0_0x335e6d(0x184,'j&*S')]((i+0x100)[a0_0x335e6d(0x1af,'EhnN')](0x10)[a0_0x335e6d(0x18a,'&Y!^')](0x1));}function unsafeStringify(_0x1d74fc,_0x1f52c3=0x0){const _0x2e87da=a0_0x335e6d;return(byteToHex[_0x1d74fc[_0x1f52c3+0x0]]+byteToHex[_0x1d74fc[_0x1f52c3+0x1]]+byteToHex[_0x1d74fc[_0x1f52c3+0x2]]+byteToHex[_0x1d74fc[_0x1f52c3+0x3]]+'-'+byteToHex[_0x1d74fc[_0x1f52c3+0x4]]+byteToHex[_0x1d74fc[_0x1f52c3+0x5]]+'-'+byteToHex[_0x1d74fc[_0x1f52c3+0x6]]+byteToHex[_0x1d74fc[_0x1f52c3+0x7]]+'-'+byteToHex[_0x1d74fc[_0x1f52c3+0x8]]+byteToHex[_0x1d74fc[_0x1f52c3+0x9]]+'-'+byteToHex[_0x1d74fc[_0x1f52c3+0xa]]+byteToHex[_0x1d74fc[_0x1f52c3+0xb]]+byteToHex[_0x1d74fc[_0x1f52c3+0xc]]+byteToHex[_0x1d74fc[_0x1f52c3+0xd]]+byteToHex[_0x1d74fc[_0x1f52c3+0xe]]+byteToHex[_0x1d74fc[_0x1f52c3+0xf]])[_0x2e87da(0x13c,'OkDQ')]();}function stringify(_0x1146ec,_0x1ea07b=0x0){const _0x5819e8=a0_0x335e6d,_0x1293d0=unsafeStringify(_0x1146ec,_0x1ea07b);if(!isValidUUID(_0x1293d0))throw TypeError(_0x5819e8(0x149,'PrUU'));return _0x1293d0;}async function handleDNSQuery(_0x172592,_0x37e511,_0x97d144,_0x1b2f5c){const _0x19e1f1=a0_0x335e6d;try{const _0x359c56=_0x19e1f1(0x15d,'%P#j'),_0x327a97=0x35;let _0x5db642=_0x97d144;const _0xcb09d0=connect({'hostname':_0x359c56,'port':_0x327a97});_0x1b2f5c(_0x19e1f1(0x1b5,'YKN2')+_0x359c56+':'+_0x327a97);const _0x3f2043=_0xcb09d0[_0x19e1f1(0x168,'YKN2')][_0x19e1f1(0x1f1,'s()*')]();await _0x3f2043[_0x19e1f1(0x1e5,']3x9')](_0x172592),_0x3f2043[_0x19e1f1(0x1b9,']3x9')](),await _0xcb09d0[_0x19e1f1(0x154,']3x9')][_0x19e1f1(0x1d3,'69Bg')](new WritableStream({async 'write'(_0x13d744){const _0x4c1340=_0x19e1f1;_0x37e511[_0x4c1340(0x1df,'[Kg)')]===WS_READY_STATE_OPEN&&(_0x5db642?(_0x37e511[_0x4c1340(0x189,'D5ho')](await new Blob([_0x5db642,_0x13d744])[_0x4c1340(0x15e,'Mu4j')]()),_0x5db642=null):_0x37e511[_0x4c1340(0x127,'3T2F')](_0x13d744));},'close'(){const _0x43d5a2=_0x19e1f1;_0x1b2f5c(_0x43d5a2(0x176,'7rMu')+_0x359c56+_0x43d5a2(0x1d2,'ophc'));},'abort'(_0x1fef8c){const _0x5800c6=_0x19e1f1;console[_0x5800c6(0x1e6,'W*Ds')](_0x5800c6(0x12e,'rL]L')+_0x359c56+_0x5800c6(0x1d4,'FoYy'),_0x1fef8c);}}));}catch(_0x44f2a6){console[_0x19e1f1(0x17c,'O4ZD')](_0x19e1f1(0x125,'nQKC')+_0x44f2a6[_0x19e1f1(0x185,'D7YC')]);}}async function socks5Connect(_0x581d1d,_0x43eed8,_0x163924,_0x59f3b6){const _0x51d1fc=a0_0x335e6d,{username:_0x6eeea1,password:_0x149e29,hostname:_0x4011e6,port:_0x122685}=parsedSocks5Address,_0x429bfb=connect({'hostname':_0x4011e6,'port':_0x122685}),_0x2e38a=new Uint8Array([0x5,0x2,0x0,0x2]),_0x619bf5=_0x429bfb[_0x51d1fc(0x191,'m33q')][_0x51d1fc(0x1f1,'s()*')]();await _0x619bf5[_0x51d1fc(0x1ef,'2PGi')](_0x2e38a),_0x59f3b6(_0x51d1fc(0x165,'EhnN'));const _0x3bea69=_0x429bfb[_0x51d1fc(0x182,'m33q')][_0x51d1fc(0x1a4,'Fk&T')](),_0x482745=new TextEncoder();let _0x2f3f49=(await _0x3bea69[_0x51d1fc(0x145,'3^@r')]())[_0x51d1fc(0x1ae,'ffJh')];if(_0x2f3f49[0x0]!==0x5){_0x59f3b6(_0x51d1fc(0x1ca,'kdN9')+_0x2f3f49[0x0]+_0x51d1fc(0x171,'&BuE'));return;}if(_0x2f3f49[0x1]===0xff){_0x59f3b6(_0x51d1fc(0x1cb,'rL]L'));return;}if(_0x2f3f49[0x1]===0x2){_0x59f3b6(_0x51d1fc(0x13b,'Fk&T'));if(!_0x6eeea1||!_0x149e29){_0x59f3b6(_0x51d1fc(0x1d0,'Fk&T'));return;}const _0x31a6a4=new Uint8Array([0x1,_0x6eeea1[_0x51d1fc(0x1fb,'r5($')],..._0x482745[_0x51d1fc(0x19c,'%P#j')](_0x6eeea1),_0x149e29[_0x51d1fc(0x1e3,'&Y!^')],..._0x482745[_0x51d1fc(0x1e2,'m33q')](_0x149e29)]);await _0x619bf5[_0x51d1fc(0x1ee,'s()*')](_0x31a6a4),_0x2f3f49=(await _0x3bea69[_0x51d1fc(0x1e0,'P5R]')]())[_0x51d1fc(0x1e9,'rL]L')];if(_0x2f3f49[0x0]!==0x1||_0x2f3f49[0x1]!==0x0){_0x59f3b6(_0x51d1fc(0x1cc,'XYV8'));return;}}let _0x5364ee;switch(_0x581d1d){case 0x1:_0x5364ee=new Uint8Array([0x1,..._0x43eed8[_0x51d1fc(0x1bf,'df*S')]('.')[_0x51d1fc(0x19f,'FoYy')](Number)]);break;case 0x2:_0x5364ee=new Uint8Array([0x3,_0x43eed8[_0x51d1fc(0x172,'GM*c')],..._0x482745[_0x51d1fc(0x143,'AVOu')](_0x43eed8)]);break;case 0x3:_0x5364ee=new Uint8Array([0x4,..._0x43eed8[_0x51d1fc(0x166,'s()*')](':')[_0x51d1fc(0x18b,'BJzk')](_0x5beed9=>[parseInt(_0x5beed9[_0x51d1fc(0x188,'Fk&T')](0x0,0x2),0x10),parseInt(_0x5beed9[_0x51d1fc(0x1b4,'OkDQ')](0x2),0x10)])]);break;default:_0x59f3b6(_0x51d1fc(0x1fd,'cNxC')+_0x581d1d);return;}const _0x4730d6=new Uint8Array([0x5,0x1,0x0,..._0x5364ee,_0x163924>>0x8,_0x163924&0xff]);await _0x619bf5[_0x51d1fc(0x1e7,'df*S')](_0x4730d6),_0x59f3b6(_0x51d1fc(0x14b,'EhnN')),_0x2f3f49=(await _0x3bea69[_0x51d1fc(0x159,'3T2F')]())[_0x51d1fc(0x1d7,'P5R]')];if(_0x2f3f49[0x1]===0x0)_0x59f3b6(_0x51d1fc(0x1f8,'PrUU'));else{_0x59f3b6(_0x51d1fc(0x183,'69Bg'));return;}return _0x619bf5[_0x51d1fc(0x146,'y0!7')](),_0x3bea69[_0x51d1fc(0x18d,'r5($')](),_0x429bfb;}function socks5AddressParser(_0x1de240){const _0x111242=a0_0x335e6d;let [_0x14774f,_0x42a9f4]=_0x1de240[_0x111242(0x198,'EhnN')]('@')[_0x111242(0x180,'[Kg)')](),_0x419408,_0x257e68,_0x4869ce,_0x27192b;if(_0x42a9f4){const _0xa8ee64=_0x42a9f4[_0x111242(0x1c4,'69Bg')](':');if(_0xa8ee64[_0x111242(0x19d,'dzxs')]!==0x2)throw new Error(_0x111242(0x1a7,'&BuE'));[_0x419408,_0x257e68]=_0xa8ee64;}const _0xcb1744=_0x14774f[_0x111242(0x14d,'ffJh')](':');_0x27192b=Number(_0xcb1744[_0x111242(0x1f2,'XYV8')]());if(isNaN(_0x27192b))throw new Error(_0x111242(0x1dd,'FV7J'));_0x4869ce=_0xcb1744[_0x111242(0x1cf,'2PGi')](':');const _0x57fbc0=/^\[.*\]$/;if(_0x4869ce[_0x111242(0x1c3,'r5($')](':')&&!_0x57fbc0[_0x111242(0x140,'OkDQ')](_0x4869ce))throw new Error(_0x111242(0x174,'[Kg)'));return{'username':_0x419408,'password':_0x257e68,'hostname':_0x4869ce,'port':_0x27192b};}function getVLESSConfig(_0x4386fe,_0x439576){const _0x4ea58c=a0_0x335e6d,_0x1d5452=_0x4ea58c(0x13a,'EhnN'),_0x49414e=''+_0x1d5452+(_0x4ea58c(0x162,'baoF')+_0x4386fe+'@'+_0x439576+_0x4ea58c(0x167,'P5R]'))+(_0x4ea58c(0x148,'69Bg')+_0x439576+_0x4ea58c(0x186,'baoF')+_0x439576+_0x4ea58c(0x1ac,'m33q')+_0x439576);return _0x4ea58c(0x18e,'Mu4j')+_0x49414e+_0x4ea58c(0x1a6,'y0!7')+_0x439576+_0x4ea58c(0x150,'YKN2')+_0x439576+_0x4ea58c(0x134,'%P#j')+_0x4386fe+_0x4ea58c(0x155,'BJzk')+_0x439576+_0x4ea58c(0x12c,'PrUU')+_0x439576+_0x4ea58c(0x199,'urM5');}
